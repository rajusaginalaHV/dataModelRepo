pipeline {
    agent any

    stages {
        stage('Exist Object') {
            steps {
                script {
                    def apiUrl = 'https://fa-erzp-dev12-saasfademo1.ds-fa.oraclepdemos.com:443/xmlpserver/services/v2/CatalogService'
                    def requestBody = '''
                        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v2="http://xmlns.oracle.com/oxp/service/v2">
   <soapenv:Header/>
   <soapenv:Body>
      <v2:objectExist>
         <v2:reportObjectAbsolutePath>${REPORTPATH}</v2:reportObjectAbsolutePath>
         <v2:userID>${USERNAME}</v2:userID>
         <v2:password>${PASSWORD}</v2:password>
      </v2:objectExist>
   </soapenv:Body>
</soapenv:Envelope>
                    '''

                    def response = httpRequest(
                        url: apiUrl,
                        contentType: 'text/xml',
                        requestBody: requestBody
                    )

                    if (response.status == 200) {
                        def responseBody = response.content
                        // Process the response as needed
                        echo "API response: ${responseBody}"
                    } else {
                        error "API call failed with status ${response.status}"
                    }
                }
            }
        }
    }
}
